<!-- app/views/admin/users/index.html.erb -->

<div class="container my-5">
  <div class="card">
    <div class="card-header">
      <h4 class="card-title">Resource Management</h4>
    </div>
    <div class="card-body">
      <table class="table table-hover">
        <thead class="table-header">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>
          <tr data-href="<%= profile_path(user) %>" class="clickable-row">
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td><%= user.role %></td>
            <td>
              <% if user.role != 'admin' %>
                <%= form_with(url: switch_user_path, method: :get, local: true) do %>
                  <%= hidden_field_tag :scope_identifier, "user_#{user.id}" %>
                  <%= submit_tag "Switch", class: "btn btn-primary" %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
